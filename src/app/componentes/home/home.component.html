<div class="home-container">
  <div class="header">
    <div class="button-container">
      <button (click)="irAQuienSoy()" class="btn-quien-soy">Quien Soy</button>
    </div>

    <div class="user-info" *ngIf="usuario; else loginButton">
      <span class="user-email">{{ usuario?.email }}</span>
      <button (click)="logOut()" class="btn-log-out">Log Out</button>
    </div>

    <ng-template #loginButton>
      <button (click)="irALogIn()" class="btn-log-in">Log In</button>
    </ng-template>
  </div>

  <button *ngIf="usuario" (click)="toggleChat()" class="btn-chat">
    {{ chatAbierto ? 'Cerrar Chat' : 'Chat' }}
  </button>

  <div *ngIf="chatAbierto && usuario" class="chat-box">
    <div class="mensajes" style="overflow-y: auto; height: 300px;">
      <div *ngFor="let msj of mensajes">
        <strong>{{ msj.emisor }}</strong> 
        <small>{{ msj.timestamp | date: 'short' }}</small>
        <span>{{ msj.texto }}</span>
      </div>
    </div>
    <input [(ngModel)]="mensajeNuevo" placeholder="Escribe un mensaje..." />
    <button (click)="enviarMensaje()">â†’</button>
  </div>
</div>
